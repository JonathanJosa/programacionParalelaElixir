<style> pre{background-color: #292F36;} </style><file name='stream.ex'ubicacion='media/shared/partner1/stream.ex'><pre><code> <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#                    Version 2, December 2004</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#  0. You just DO WHAT THE FUCK YOU WANT TO.</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#FBFBFF;'>defprotocol</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>Send</span> <span style='color:#FBFBFF;'>data</span> <span style='color:#FBFBFF;'>through</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>iodata</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#EAC435;'><i>:ok</i></span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>term</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>send</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>data</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@doc</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Send</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>a</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>file</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>through</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>socket</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'><span style='color:#FBFBFF;'>21</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>34</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>fib</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>iterate</span> <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>FibVal</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>FibVal</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>val:</span> <span style='color:#FBFBFF;'>val</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>next:</span> <span style='color:#FBFBFF;'>next</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>FibVal</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>val:</span> <span style='color:#FBFBFF;'>next</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>next:</span> <span style='color:#FBFBFF;'>val</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>next</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>Return</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>lazy</span> <span style='color:#FBFBFF;'>sequence</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>Fibonacci</span> <span style='color:#FBFBFF;'>numbers</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>This</span> <span style='color:#FBFBFF;'>one</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>better</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>it</span> <span style='color:#FBFBFF;'>returns</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>actual</span> <span style='color:#FBFBFF;'>integer</span> <span style='color:#FBFBFF;'>value</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>doesn</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>t</span> <span style='color:#1098F7;'>use</span> <span style='color:#FBFBFF;'>FibVal</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>thanks</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>unfold</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>2</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>iex</span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Fib.</span><span style='color:#FBFBFF;'>fib2</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>take</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>10</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>13</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>21</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>34</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>fib2</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>unfold</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>a</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>b</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>a</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>b</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>b</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>start</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>FibTest</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>use</span> <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>Case</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>fib</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>fib</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Fib.</span><span style='color:#FBFBFF;'>fib</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>map</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>&</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>&</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>val</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>take</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>10</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>fib</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>13</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>21</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>34</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>fib2</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>fib</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Fib.</span><span style='color:#FBFBFF;'>fib2</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>take</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>10</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>fib</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>13</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>21</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>34</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> </code></pre><br></file>BBB;'>:ok</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>term</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>}</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>{</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:error</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>term</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>}</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>length</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>or</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>options</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@doc</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Receive</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>data</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>from</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>socket</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>with</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>given</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>length</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>and</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>options</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@spec</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>t</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>non</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>neg</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>integer</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>Keyword.</span><span style='color:#03DDB2;'>t</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:</span><span style='color:#9A8BBB;'>:</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>{</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:ok</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>term</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>}</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>{</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:error</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>term</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>}</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>length</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>options</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@doc</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Shutdown</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>socket</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>in</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>given</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>mode</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>either</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'>:both</span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'>:read</span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>or</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'>:write</span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@spec</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>shutdown</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>t</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#EAC435;'>:both</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>|</span><span style='color:#03DDB2;'> </span><span style='color:#EAC435;'>:read</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>|</span><span style='color:#03DDB2;'> </span><span style='color:#EAC435;'>:write</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:</span><span style='color:#9A8BBB;'>:</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:ok</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>{</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:error</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>term</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>}</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>shutdown</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>how</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#EAC435;'>:both</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@doc</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Close</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>socket</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@spec</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>close</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>t</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:</span><span style='color:#9A8BBB;'>:</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:ok</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>{</span><span style='color:#9A8BBB;'>:error</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>term</span><span style='color:#9A8BBB;'>}</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>close</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>end</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Socket.</span><span style='color:#9A8BBB;'>Stream</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#C73E1D;'>@type</span> <span style='color:#FBFBFF;'>t</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#D7B884;'>Protocol.</span><span style='color:#FBFBFF;'>t</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>use</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#FBFBFF;'>Helpers</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>import</span> <span style='color:#FBFBFF;'>Kernel</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>except:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>send:</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defdelegate</span> <span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span>     <span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defdelegate</span> <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span>     <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defdelegate</span> <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span>     <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defdelegate</span> <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span>     <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defdelegate</span> <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>or</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span>     <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>or</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defdelegate</span> <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span>     <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defdelegate</span> <span style='color:#FBFBFF;'>shutdown</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span>     <span style='color:#FBFBFF;'>shutdown</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defdelegate</span> <span style='color:#FBFBFF;'>shutdown</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>how</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span>     <span style='color:#FBFBFF;'>shutdown</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>how</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defdelegate</span> <span style='color:#FBFBFF;'>close</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span>     <span style='color:#FBFBFF;'>close</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to:</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>Read</span> <span style='color:#FBFBFF;'>from</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>IO</span> <span style='color:#FBFBFF;'>device</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>socket</span> <span style='color:#FBFBFF;'>following</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Options</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>`</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>amount</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>bytes</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>read</span> <span style='color:#FBFBFF;'>from</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>IO</span> <span style='color:#FBFBFF;'>device</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>omitted</span> <span style='color:#FBFBFF;'>it</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>will</span> <span style='color:#FBFBFF;'>read</span> <span style='color:#FBFBFF;'>until</span> <span style='color:#FBFBFF;'>EOF</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>`</span><span style='color:#EAC435;'><i>:offset</i></span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>amount</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>bytes</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>read</span> <span style='color:#FBFBFF;'>from</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>IO</span> <span style='color:#FBFBFF;'>device</span> <span style='color:#FBFBFF;'>before</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>starting</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>what</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>s</span> <span style='color:#FBFBFF;'>being</span> <span style='color:#FBFBFF;'>read</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>`</span><span style='color:#EAC435;'><i>:chunk</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>size</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>chunks</span> <span style='color:#FBFBFF;'>read</span> <span style='color:#FBFBFF;'>from</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>IO</span> <span style='color:#FBFBFF;'>device</span> <span style='color:#FBFBFF;'>at</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>time</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:io</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>device</span><span style='color:#FBFBFF;'>)</span>            <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#EAC435;'><i>:ok</i></span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>term</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:io</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>device</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#EAC435;'><i>:ok</i></span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>term</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>io</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>io</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>options</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>offset</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:offset</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>case</span> <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>binread</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>offset</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:eof</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:chunk</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>4096</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:chunk</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>4096</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>total</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>size</span> <span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>0</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>total</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span> <span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>size</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>case</span> <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>binread</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>size</span> <span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>total</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:eof</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>data</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>self</span> <span style='color:#B80C09;'>|></span> <span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>total</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>case</span> <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>binread</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:eof</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>data</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>self</span> <span style='color:#B80C09;'>|></span> <span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>total</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defimpl</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>Port</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>send</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>data</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tcp</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>file</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>path</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>options</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>cond</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#EE7B30;'>&&</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:chunk</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:file</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>sendfile</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:offset</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size:</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:chunk</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:file</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>sendfile</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:offset</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#4ECDC4;'><i>true</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:file</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>sendfile</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>length</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>length</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>integer</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>options</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>options</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>list</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>length</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>options</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>timeout</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:timeout</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#EAC435;'><i>:infinity</i></span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>case</span> <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tcp</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>timeout</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>ok</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>ok</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:closed</i></span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>nil</i></span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>shutdown</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>how</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#EAC435;'>:both</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tcp</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>shutdown</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>how</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:read</i></span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:read</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:write</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:write</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:both</i></span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:read</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>write</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>close</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tcp</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>close</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defimpl</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>Protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>Tuple</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>require</span> <span style='color:#FBFBFF;'>Record</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>send</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>data</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>self</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Record.</span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:sslsocket</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:ssl</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>file</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>path</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>options</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>self</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Record.</span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:sslsocket</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>cond</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#EE7B30;'>&&</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:chunk</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:offset</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:chunk</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:offset</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:size</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4096</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#4ECDC4;'><i>true</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4096</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>offset</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>path</span> <span style='color:#B80C09;'>|></span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>binary</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>offset</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>File.</span><span style='color:#FBFBFF;'>stat</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>offset</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>path</span> <span style='color:#B80C09;'>|></span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>binary</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>case</span> <span style='color:#D7B884;'>File.</span><span style='color:#FBFBFF;'>open</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:read</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>&</span><span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>io</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>&</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>offset:</span> <span style='color:#FBFBFF;'>offset</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>size:</span> <span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size:</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:ok</i></span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>self</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Record.</span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:sslsocket</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>length</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>self</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Record.</span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:sslsocket</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>and</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>length</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>integer</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>options</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>self</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Record.</span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:sslsocket</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>and</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>options</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>list</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recv</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>length</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>options</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>self</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|></span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Record.</span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:sslsocket</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>timeout</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:timeout</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#EAC435;'><i>:infinity</i></span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>case</span> <span style='color:#EAC435;'><i>:ssl</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>timeout</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>ok</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>ok</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:closed</i></span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>nil</i></span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>shutdown</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>how</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#EAC435;'>:both</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:ssl</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>shutdown</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>how</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:read</i></span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:read</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:write</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:write</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:both</i></span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:read</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>write</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>close</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>self</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:ssl</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>close</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span></code></pre><br></file>