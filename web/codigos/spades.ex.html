<style> pre{background-color: #292F36;} </style><file name='spades.ex'ubicacion='media/shared/partner1/spades.ex'><pre><code> <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># Play Spades with four players using iex</i></span><span style='color:#1098F7;'>!</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># To play</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># 1. In one terminal, start iex as the dealer</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex --name dealer</i></span><span style='color:#C73E1D;'>@localhost</span> <span style='color:#FBFBFF;'>14</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>spades</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>exs</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex</i></span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Player.</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>game</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># 2. In three more terminals, start iex as players</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex --sname two 14-spades.exs</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex</i></span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Node.</span><span style='color:#FBFBFF;'>connect</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:dealer</i></span><span style='color:#C73E1D;'>@localhost)</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex</i></span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Player.</span><span style='color:#FBFBFF;'>join</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex --sname three 14-spades.exs</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex</i></span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Node.</span><span style='color:#FBFBFF;'>connect</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:dealer</i></span><span style='color:#C73E1D;'>@localhost)</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex</i></span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Player.</span><span style='color:#FBFBFF;'>join</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex --sname four 14-spades.exs</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex</i></span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Node.</span><span style='color:#FBFBFF;'>connect</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:dealer</i></span><span style='color:#C73E1D;'>@localhost)</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   iex</i></span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Player.</span><span style='color:#FBFBFF;'>join</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># 3. Enjoy</i></span><span style='color:#1098F7;'>!</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Dealer</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>A</span> <span style='color:#FBFBFF;'>separate</span> <span style='color:#FBFBFF;'>process</span> <span style='color:#FBFBFF;'>that</span> <span style='color:#FBFBFF;'>brokers</span> <span style='color:#FBFBFF;'>messages</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>determines</span> <span style='color:#FBFBFF;'>winners</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@card</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>vals</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>into</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>J</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>11</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Q</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>12</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>K</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>13</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>A</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>14</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>HashDict.</span><span style='color:#FBFBFF;'>new</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>start</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>game</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:global</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>register</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:dealer</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>waiting</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>players</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>players</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>dealing</span> <span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>deal</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>shuffle</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>starting</span> <span style='color:#FBFBFF;'>game</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>signal</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>waiting</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>plays</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>plays</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span> <span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>\</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:join</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>joined</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>players</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>pid</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'><</span> <span style='color:#FBFBFF;'>4</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>everyone</span> <span style='color:#FBFBFF;'>joined</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>players</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>shuffle</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:random</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>seed</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>now</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>deck</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>suit</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>~</span><span style='color:#FBFBFF;'>w</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Hearts</span> <span style='color:#FBFBFF;'>Diamonds</span> <span style='color:#FBFBFF;'>Clubs</span> <span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>               <span style='color:#FBFBFF;'>face</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>6</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>7</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>9</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>10</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>J</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Q</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>K</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>A</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>               <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>suit</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>face</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>shuffle</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>deck</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>deal</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>player</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>rest</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>card</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>rest</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:deal</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>deal</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>rest</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>players</span> <span style='color:#1098F7;'>+</span><span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>rest</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>deal</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>signal</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>each</span> <span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>p</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>p</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:start</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>plays</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>plays</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>plays</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>tricks</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>tricks</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span> <span style='color:#1098F7;'><</span> <span style='color:#FBFBFF;'>13</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>tricks</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>tricks</span> <span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>action</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:play</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>broadcast</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>action</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span> <span style='color:#1098F7;'>+</span><span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>4</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>winner</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>trick</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>winner</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>broadcast</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:trick</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>winner</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>tricks</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span> <span style='color:#1098F7;'><</span> <span style='color:#FBFBFF;'>12</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>winner</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:your</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>turn</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>plays</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>tricks</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>players</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>reorder</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>send</span> <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>first</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:your</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>turn</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>plays</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>tricks</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>plays</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>13</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>broadcast</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:end</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>trick</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>winner</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>cards</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>played</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>=</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>first</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>card</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>|</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>rest</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>suit</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>first</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>card</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>any?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>s</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>s</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>sort</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>filter</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>s</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>s</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>first</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>sort</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>played</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>filter</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>s</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>s</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>suit</span> <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>first</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>sort</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>sort</span> <span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v1</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v2</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Dict.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#C73E1D;'>@card</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>vals</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v1</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Dict.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#C73E1D;'>@card</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>vals</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v2</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>broadcast</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>action</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>each</span> <span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>p</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>p</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>action</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>reorder</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>first</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>rest</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>at</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>player</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>players</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>reorder</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>players</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>rest</span> <span style='color:#1098F7;'>+</span><span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>first</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Player</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Handle</span> <span style='color:#FBFBFF;'>player</span> <span style='color:#FBFBFF;'>state</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>card</span> <span style='color:#FBFBFF;'>selection</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>plays</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Call</span> <span style='color:#FBFBFF;'>this</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>dealer</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>set</span> <span style='color:#FBFBFF;'>up</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>game</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>start</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>game</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>dealer</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>spawn</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>link</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:start</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>game</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:join</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>I</span> <span style='color:#FBFBFF;'>am</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Call</span> <span style='color:#FBFBFF;'>this</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>player</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>join</span> <span style='color:#FBFBFF;'>an</span> <span style='color:#FBFBFF;'>existing</span> <span style='color:#FBFBFF;'>game</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>join</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>dealer</span> <span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:global</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>whereis</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:dealer</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:join</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>I</span> <span style='color:#FBFBFF;'>am</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span> <span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>\</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:deal</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>hand</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>card</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:start</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>of</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clubs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:play</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>delete</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>of</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clubs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>find</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>end</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>hand</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:play</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>played</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:trick</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>player</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>won</span> <span style='color:#FBFBFF;'>trick</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:your</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>turn</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>hand</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>select</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>and</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:end</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>game</span> <span style='color:#FBFBFF;'>over</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>select</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>and</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>show</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>first</span><span style='color:#FBFBFF;'>(</span><span style='color:#D7B884;'>System.</span><span style='color:#FBFBFF;'>argv</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>"</span><span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>test</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span> <span style='color:#565857;'><i># TODO how to set debug mode based on args</i></span><span style='color:#FBFBFF;'>?</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>shuffle</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>first</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>select</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>play</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>dealer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>select</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>try</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>number</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>gets</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Enter</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>card</span> <span style='color:#FBFBFF;'>number</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>play:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>String.</span><span style='color:#FBFBFF;'>strip</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>String.</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>integer</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>at</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>number</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unless</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>card</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>rescue</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>ArgumentError</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Invalid</span> <span style='color:#FBFBFF;'>entry</span><span style='color:#FBFBFF;'>;</span> <span style='color:#FBFBFF;'>try</span> <span style='color:#FBFBFF;'>again</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>select</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>show</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>with</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>each</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>suit</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>face</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>index</span><span style='color:#1098F7;'>+</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>.</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>face</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>suit</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>if</span> <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>first</span><span style='color:#FBFBFF;'>(</span><span style='color:#D7B884;'>System.</span><span style='color:#FBFBFF;'>argv</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>"</span><span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>test</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>start</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>SpadesTest</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>use</span> <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>Case</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>trick</span> <span style='color:#FBFBFF;'>winner</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>single</span> <span style='color:#FBFBFF;'>suit</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>hand</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Dealer.</span><span style='color:#FBFBFF;'>trick</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>winner</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>trick</span> <span style='color:#FBFBFF;'>winner</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>single</span> <span style='color:#FBFBFF;'>suit</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>face</span> <span style='color:#FBFBFF;'>cards</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>hand</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>J</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>A</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Dealer.</span><span style='color:#FBFBFF;'>trick</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>winner</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>A</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>trick</span> <span style='color:#FBFBFF;'>winner</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>irrelevant</span> <span style='color:#FBFBFF;'>suit</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>hand</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Hearts</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Dealer.</span><span style='color:#FBFBFF;'>trick</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>winner</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>trick</span> <span style='color:#FBFBFF;'>winner</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>one</span> <span style='color:#FBFBFF;'>spade</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>hand</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Clubs</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Dealer.</span><span style='color:#FBFBFF;'>trick</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>winner</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>trick</span> <span style='color:#FBFBFF;'>winner</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>all</span> <span style='color:#FBFBFF;'>spades</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>hand</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>3</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>card</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Dealer.</span><span style='color:#FBFBFF;'>trick</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>winner</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>hand</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>card</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spades</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>setup</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>dealer</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>spawn</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>monitor</span> <span style='color:#FBFBFF;'>Player</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:start</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>game</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:timer</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>sleep</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>100</span><span style='color:#FBFBFF;'>)</span> <span style='color:#565857;'><i># TODO why is this necessary</i></span><span style='color:#FBFBFF;'>?</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>two</span>    <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>spawn</span> <span style='color:#FBFBFF;'>Player</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:join</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>three</span>  <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>spawn</span> <span style='color:#FBFBFF;'>Player</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:join</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>four</span>   <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>spawn</span> <span style='color:#FBFBFF;'>Player</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:join</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>wait</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>wait</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:DOWN</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:quit</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>msg</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>msg</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>wait</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> </code></pre><br></file>