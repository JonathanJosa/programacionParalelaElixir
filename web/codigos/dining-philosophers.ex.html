<style> pre{background-color: #292F36;} </style><file name='dining-philosophers.ex'ubicacion='media/shared/partner1/dining-philosophers.ex'><pre><code> <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Table</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>h2</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>Problem</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>http:</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>rosettacode</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>org</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>wiki</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>Dining</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>philosophers</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Five</span> <span style='color:#FBFBFF;'>philosophers</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Aristotle</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Kant</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Spinoza</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Marx</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>Russell</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>tasks</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>spend</span> <span style='color:#FBFBFF;'>their</span> <span style='color:#FBFBFF;'>time</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>thinking</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>eating</span> <span style='color:#FBFBFF;'>spaghetti</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>They</span> <span style='color:#FBFBFF;'>eat</span> <span style='color:#FBFBFF;'>at</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>round</span> <span style='color:#FBFBFF;'>table</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>five</span> <span style='color:#FBFBFF;'>individual</span> <span style='color:#FBFBFF;'>seats</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>For</span> <span style='color:#FBFBFF;'>eating</span> <span style='color:#FBFBFF;'>each</span> <span style='color:#FBFBFF;'>philosopher</span> <span style='color:#FBFBFF;'>needs</span> <span style='color:#FBFBFF;'>two</span> <span style='color:#FBFBFF;'>forks</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>resources</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>There</span> <span style='color:#FBFBFF;'>are</span> <span style='color:#FBFBFF;'>five</span> <span style='color:#FBFBFF;'>forks</span> <span style='color:#FBFBFF;'>on</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>one</span> <span style='color:#FBFBFF;'>left</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>one</span> <span style='color:#FBFBFF;'>right</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>each</span> <span style='color:#FBFBFF;'>seat</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>When</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>philosopher</span> <span style='color:#FBFBFF;'>cannot</span> <span style='color:#FBFBFF;'>grab</span> <span style='color:#FBFBFF;'>both</span> <span style='color:#FBFBFF;'>forks</span> <span style='color:#FBFBFF;'>it</span> <span style='color:#FBFBFF;'>sits</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>waits</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Eating</span> <span style='color:#FBFBFF;'>takes</span> <span style='color:#FBFBFF;'>random</span> <span style='color:#FBFBFF;'>time</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>then</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>philosopher</span> <span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>forks</span> <span style='color:#FBFBFF;'>down</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>leaves</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>dining</span> <span style='color:#FBFBFF;'>room</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>After</span> <span style='color:#FBFBFF;'>spending</span> <span style='color:#FBFBFF;'>some</span> <span style='color:#FBFBFF;'>random</span> <span style='color:#FBFBFF;'>time</span> <span style='color:#FBFBFF;'>thinking</span> <span style='color:#FBFBFF;'>about</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>nature</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>universe</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>he</span> <span style='color:#FBFBFF;'>again</span> <span style='color:#FBFBFF;'>becomes</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>hungry</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>circle</span> <span style='color:#FBFBFF;'>repeats</span> <span style='color:#FBFBFF;'>itself</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>h2</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>My</span> <span style='color:#FBFBFF;'>Solution</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>So</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>I</span> <span style='color:#FBFBFF;'>cheated</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>little</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>I</span> <span style='color:#FBFBFF;'>skipped</span> <span style='color:#FBFBFF;'>modeling</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>seats</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>fork</span> <span style='color:#FBFBFF;'>placement</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>instead</span> <span style='color:#FBFBFF;'>modeled</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>forks</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>5</span> <span style='color:#FBFBFF;'>discreet</span> <span style='color:#FBFBFF;'>resources</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>managed</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Table</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>I</span> <span style='color:#FBFBFF;'>figured</span> <span style='color:#FBFBFF;'>philosophers</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>just</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>reach</span> <span style='color:#FBFBFF;'>over</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>grab</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>fork</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>yeah?</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>It</span> <span style='color:#FBFBFF;'>turns</span> <span style='color:#FBFBFF;'>out</span> <span style='color:#FBFBFF;'>that</span> <span style='color:#FBFBFF;'>message</span> <span style='color:#FBFBFF;'>passing</span> <span style='color:#FBFBFF;'>between</span> <span style='color:#FBFBFF;'>processes</span> <span style='color:#FBFBFF;'>made</span> <span style='color:#FBFBFF;'>this</span> <span style='color:#FBFBFF;'>very</span> <span style='color:#FBFBFF;'>simple</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>Even</span> <span style='color:#FBFBFF;'>adding</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>seats</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>resources</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>managed</span> <span style='color:#FBFBFF;'>wouldn</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>t</span> <span style='color:#FBFBFF;'>make</span> <span style='color:#FBFBFF;'>this</span> <span style='color:#FBFBFF;'>much</span> <span style='color:#FBFBFF;'>more</span> <span style='color:#FBFBFF;'>difficult</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>h2</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>Sample</span> <span style='color:#FBFBFF;'>Run</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>$</span> <span style='color:#FBFBFF;'>elixir</span> <span style='color:#FBFBFF;'>17</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>dining</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>philosophers</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>exs</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>1</span> <span style='color:#FBFBFF;'>philosopher</span> <span style='color:#FBFBFF;'>waiting:</span> <span style='color:#FBFBFF;'>Aristotle</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>1</span> <span style='color:#FBFBFF;'>philosopher</span> <span style='color:#FBFBFF;'>waiting:</span> <span style='color:#FBFBFF;'>Kant</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>Aristotle</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>eating</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>count:</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>1</span> <span style='color:#FBFBFF;'>philosopher</span> <span style='color:#FBFBFF;'>waiting:</span> <span style='color:#FBFBFF;'>Spinoza</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>Kant</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>eating</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>count:</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>2</span> <span style='color:#FBFBFF;'>philosophers</span> <span style='color:#FBFBFF;'>waiting:</span> <span style='color:#FBFBFF;'>Marx</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Spinoza</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>3</span> <span style='color:#FBFBFF;'>philosophers</span> <span style='color:#FBFBFF;'>waiting:</span> <span style='color:#FBFBFF;'>Russell</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Marx</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Spinoza</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>Kant</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>done</span> <span style='color:#FBFBFF;'>eating</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>Aristotle</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>done</span> <span style='color:#FBFBFF;'>eating</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Philosopher</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defstruct</span> <span style='color:#FBFBFF;'>name:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ate:</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>thunk:</span> <span style='color:#FBFBFF;'>0</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>simulate</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>forks</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:fork1</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:fork2</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:fork3</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:fork4</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:fork5</i></span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>table</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>spawn</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>link</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Table</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:manage</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>resources</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>spawn</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Dine</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:dine</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>Philosopher</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Aristotle</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>spawn</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Dine</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:dine</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>Philosopher</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Kant</span><span style='color:#FBFBFF;'>"</span>     <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>spawn</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Dine</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:dine</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>Philosopher</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Spinoza</span><span style='color:#FBFBFF;'>"</span>  <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>spawn</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Dine</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:dine</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>Philosopher</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Marx</span><span style='color:#FBFBFF;'>"</span>     <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>spawn</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Dine</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:dine</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>Philosopher</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Russell</span><span style='color:#FBFBFF;'>"</span>  <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>manage</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>resources</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>forks</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>waiting</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># distribute forks to waiting philosophers</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>waiting</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>0</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>names</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>waiting</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>name</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>length</span> <span style='color:#FBFBFF;'>waiting</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>philosopher</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>waiting</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>else:</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>s</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>waiting:</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>join</span> <span style='color:#FBFBFF;'>names</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>></span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>2</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>waiting</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>waiting</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>fork1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fork2</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>forks</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:eat</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>fork1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fork2</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:sit</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>down</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>manage</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>resources</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>waiting</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:give</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>up</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>seat</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>free</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>forks</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>free</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>forks</span> <span style='color:#1098F7;'>+</span><span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>forks</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>length</span> <span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>fork</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>else:</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>s</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>available</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>manage</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>resources</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>waiting</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Dine</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>dine</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>phil</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>table</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:sit</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>down</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:eat</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>phil</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>eat</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>phil</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>think</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>dine</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>eat</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>phil</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>forks</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>table</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>phil</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>phil</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>ate:</span> <span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>ate</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>eating</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>count:</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>ate</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:timer</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>sleep</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:random</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>uniform</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>1000</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>done</span> <span style='color:#FBFBFF;'>eating</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>table</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:give</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>up</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>seat</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>forks</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>phil</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>think</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>phil</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>thinking</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>count:</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>thunk</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:timer</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>sleep</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:random</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>uniform</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>1000</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>phil</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>thunk:</span> <span style='color:#FBFBFF;'>phil</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>thunk</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#EAC435;'><i>:random</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>seed</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>now</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> <span style='color:#D7B884;'>Table.</span><span style='color:#FBFBFF;'>simulate</span>
 <span style='color:#C19875'> ·</span> </code></pre><br></file>