<style> pre{background-color: #292F36;} </style><file name='vacio.ex'ubicacion='media/shared/partner2/vacio.ex'><pre><code> <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#                    Version 2, December 2004</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#            DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#  0. You just DO WHAT THE FUCK YOU WANT TO.</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Socket.</span><span style='color:#9A8BBB;'>SOCKS</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>use</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#FBFBFF;'>Helpers</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>connect</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>to</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>through</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>options</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>address</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>port</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>auth</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>through</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Tuple.</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>socket</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>pre</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>address</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>port</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>            <span style='color:#EAC435;'><i>:ok</i></span>             <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>handshake</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:version</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>auth</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>            <span style='color:#EAC435;'><i>:ok</i></span>             <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>post</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>socket</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span> <span style='color:#FBFBFF;'>connect</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>through</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defbang</span> <span style='color:#FBFBFF;'>connect</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>through</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>pre</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>address</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>port</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>options</span> <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:mode</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:active</i></span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:mode</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:once</i></span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>options</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>put</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:mode</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:passive</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>options</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>TCP.</span><span style='color:#FBFBFF;'>connect</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>address</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>port</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>handshake</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>auth</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>address</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>port</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>user</span> <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>auth</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>></span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>1</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>auth</span> <span style='color:#B80C09;'>|></span> <span style='color:#FBFBFF;'>elem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>case</span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Address.</span><span style='color:#FBFBFF;'>parse</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>address</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>a</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>b</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>c</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>d</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>socket</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'><</span><span style='color:#1098F7;'><</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># version</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x04</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># make a stream TCP connection</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x01</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># port in network byte order</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>port</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>big</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>16</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># IP address in network byte order</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>a</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>b</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>c</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>d</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># user name followed by NULL</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>user</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span> <span style='color:#1098F7;'>></span><span style='color:#1098F7;'>></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#EAC435;'><i>:ok</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>               <span style='color:#FBFBFF;'>response</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>               <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#4ECDC4;'><i>nil</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>socket</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>send</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'><</span><span style='color:#1098F7;'><</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># version</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x04</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># make a stream TCP connection</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x01</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># port in network byte order</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>port</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>big</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>size</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>16</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># invalid IP address</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>xff</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># user name followed by NULL</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>user</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#565857;'><i># host followed by NULL</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>address</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span>    <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span> <span style='color:#1098F7;'>></span><span style='color:#1098F7;'>></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#EAC435;'><i>:ok</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>               <span style='color:#FBFBFF;'>response</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>               <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>handshake</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>auth</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>address</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>port</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:hue</i></span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>response</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>4</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>socket</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Socket.</span><span style='color:#D7B884;'>Stream.</span><span style='color:#FBFBFF;'>recv</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># request granted</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'><</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x5a</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>16</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>32</span> <span style='color:#1098F7;'>></span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># request rejected or failed</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'><</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x5b</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>16</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>32</span> <span style='color:#1098F7;'>></span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:rejected</i></span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># request failed because client is not running identd </i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>not</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># reachable from the server</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'><</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x5c</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>16</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>32</span> <span style='color:#1098F7;'>></span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:unreachable</i></span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># request failed because client</i></span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>s</span> <span style='color:#FBFBFF;'>identd</span> <span style='color:#FBFBFF;'>could</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>confirm</span> <span style='color:#FBFBFF;'>the</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># user ID string in the request</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'><</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x00</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>x5d</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>16</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>32</span> <span style='color:#1098F7;'>></span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:unauthorized</i></span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>reason</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>response</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:hue</i></span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>post</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>socket</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>cond</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:mode</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:active</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>socket</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Socket.</span><span style='color:#FBFBFF;'>active</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:mode</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:once</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>socket</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Socket.</span><span style='color:#FBFBFF;'>active</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:once</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>         <span style='color:#4ECDC4;'><i>true</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span></code></pre><br></file>