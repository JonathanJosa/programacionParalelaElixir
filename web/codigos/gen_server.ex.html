<style> pre{background-color: #292F36;} </style><file name='gen_server.ex'ubicacion='media/shared/partner1/gen_server.ex'><pre><code> <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># I wanted to learn about the GenServer, so</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># 1. first wrote a function to return prime factors of a given number</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># 2. then wrapped that in a </i></span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>"</span> <span style='color:#FBFBFF;'>that</span> <span style='color:#FBFBFF;'>handles</span> <span style='color:#FBFBFF;'>both</span> <span style='color:#FBFBFF;'>sync</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>async</span> <span style='color:#FBFBFF;'>calls</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>PrimeFactors</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Calculate</span> <span style='color:#FBFBFF;'>prime</span> <span style='color:#FBFBFF;'>factors</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>any</span> <span style='color:#FBFBFF;'>number</span> <span style='color:#FBFBFF;'>given</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Given</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>return</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>prime</span> <span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>prime</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>factors</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>number</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>div</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>2</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>factors</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'>\</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>cond</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>prime?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>number</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>rem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>div</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>0</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>prime</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>div</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>div</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>div</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#4ECDC4;'><i>true</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>prime</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>div</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Given</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>return</span> <span style='color:#4ECDC4;'><i>true</i></span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>number</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>prime</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>prime?</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>2</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#4ECDC4;'><i>true</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>prime?</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>number</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>prime?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:math</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>sqrt</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>)</span> <span style='color:#B80C09;'>|></span> <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>trunc</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>prime?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#4ECDC4;'><i>true</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>prime?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>div</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>rem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>div</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>0</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>prime?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>number</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>div</span> <span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>PrimeFactorsServer</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Wrap</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#D7B884;'>PrimeFactors.</span><span style='color:#FBFBFF;'>prime</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>factors</span> <span style='color:#FBFBFF;'>functionality</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>use</span> <span style='color:#FBFBFF;'>GenServer</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>import</span> <span style='color:#FBFBFF;'>PrimeFactors</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>start</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>link</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>link</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:local</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:prime</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>init</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>args</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># synchronous</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>handle</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>call</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:flush</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>from</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>context</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:reply</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>context</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>handle</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>call</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>num</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>from</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>context</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:reply</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>prime</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>num</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>context</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># asynchronous</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>handle</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>cast</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>num</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>context</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:noreply</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>num</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>prime</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>num</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>context</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>start</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>PrimeFactorsTest</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>use</span> <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>Case</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>import</span> <span style='color:#FBFBFF;'>PrimeFactors</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>prime</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>prime</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>10</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>prime</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>factors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>100</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>prime?</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>prime?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>prime?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>11</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>prime?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>8</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>async</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>PrimeFactorsServer.</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>link</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>cast</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>10</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>cast</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>100</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>cast</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1000</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>call</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:flush</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>1000</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>100</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>10</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#EAC435;'><i>:gen</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>call</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:flush</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> </code></pre><br></file>