<style> pre{background-color: #292F36;} </style><file name='mainfest.ex'ubicacion='media/shared/partner2/mainfest.ex'><pre><code> <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>ElixirScript.</span><span style='color:#9A8BBB;'>Manifest</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>read</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>manifest</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>read</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>manifest</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>manifest</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>path</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>if</span> <span style='color:#D7B884;'>File.</span><span style='color:#FBFBFF;'>exists?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>manifest</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>manifest</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>path</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>File.</span><span style='color:#FBFBFF;'>read</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#B80C09;'>|></span> <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>term</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>     <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>write</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>manifest</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>map</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>write</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>manifest</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>manifest</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>path</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>modules</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>data</span> <span style='color:#1098F7;'>=</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>reduce</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>modules</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>current</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>data</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#D7B884;'>Map.</span><span style='color:#FBFBFF;'>put</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>current</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Map.</span><span style='color:#FBFBFF;'>drop</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:js</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>code</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>data</span> <span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>term</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:compressed</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>File.</span><span style='color:#FBFBFF;'>mkdir</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>p</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#D7B884;'>Path.</span><span style='color:#FBFBFF;'>dirname</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>manifest</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>File.</span><span style='color:#FBFBFF;'>write</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>manifest</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   
 <span style='color:#C19875'> ·</span>       <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span></code></pre><br></file>