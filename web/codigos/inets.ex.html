<style> pre{background-color: #292F36;} </style><file name='inets.ex'ubicacion='media/shared/partner1/inets.ex'><pre><code> <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># just playing with inets - nothing special</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#FBFBFF;'>require</span> <span style='color:#FBFBFF;'>Record</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>WebServer</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>run</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:inets</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>options</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>foo</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>server</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>root:</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>tmp</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>document</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>root:</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>tmp</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>port:</span> <span style='color:#FBFBFF;'>3000</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>modules:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>App</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:inets</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>start</span> <span style='color:#EAC435;'><i>:httpd</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>running</span> <span style='color:#FBFBFF;'>on</span> <span style='color:#FBFBFF;'>port</span> <span style='color:#FBFBFF;'>3000</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#565857;'><i># TODO better way to wait</i></span><span style='color:#FBFBFF;'>?</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>App</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>defrecord</span> <span style='color:#EAC435;'><i>:mod</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:mod</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>from</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>lib:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>inets</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>include</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>httpd</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>hrl</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>unquote</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:do</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>data</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>response</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:request</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>uri</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>'</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>hello</span> <span style='color:#FBFBFF;'>world</span><span style='color:#FBFBFF;'>'</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>_</span>   <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>hello</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:request</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>uri</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:proceed</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>response:</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>200</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>response</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#D7B884;'>WebServer.</span><span style='color:#FBFBFF;'>run</span>
 <span style='color:#C19875'> ·</span> </code></pre><br></file>