<style> pre{background-color: #292F36;} </style><file name='record.ex'ubicacion='media/shared/partner1/record.ex'><pre><code> <span style='color:#C19875'> ·</span<s<span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>start</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>User</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defstruct</span> <span style='color:#FBFBFF;'>email:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>password:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#FBFBFF;'>defimpl</span> <span style='color:#D7B884;'>String.</span><span style='color:#FBFBFF;'>Chars</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>User</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>to</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>string</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>%</span><span style='color:#03DDB2;'>User</span><span style='color:#03DDB2;'>{</span><span style='color:#03DDB2;'>email:</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>email</span><span style='color:#03DDB2;'>}</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>email</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>RecordTest</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>use</span> <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>Case</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>ScopeTest</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>use</span> <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>Case</span>
 <span style='color:#C19875'> ·</span>     
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># https</i></span><span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>hexdocs</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>pm</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>elixir</span><span style='color:#FBFBFF;'>/</span><span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>html</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>require</span> <span style='color:#FBFBFF;'>Record</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>defrecordp</span> <span style='color:#EAC435;'><i>:person</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>first</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>last</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>age:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>defrecordp</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>p</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>person</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>first</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Kai</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>last</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Morgan</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>age:</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>)</span> <span style='color:#565857;'><i># regular function call</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>p</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:person</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Kai</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Morgan</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>}</span> <span style='color:#565857;'><i># just a tuple</i></span><span style='color:#1098F7;'>!</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># CompileError</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># test </i></span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>defrecordp</span> <span style='color:#FBFBFF;'>out</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>scope</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#   person</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># end</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>sample</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>User</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>email:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>kai</span><span style='color:#C73E1D;'>@example</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>com</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>password:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>trains</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>}</span> <span style='color:#565857;'><i># special % syntax for struct creation</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>defstruct</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>sample</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>User</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>email:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>kai</span><span style='color:#C73E1D;'>@example</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>com</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>password:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>trains</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>property</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>sample</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>email</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>kai</span><span style='color:#C73E1D;'>@example</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>com</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>update</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>u</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>sample</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>u2</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>User</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>u</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>email:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>tim</span><span style='color:#C73E1D;'>@example</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>com</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>u2</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>User</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>email:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>tim</span><span style='color:#C73E1D;'>@example</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>com</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>password:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>trains</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span> <span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>string</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>sample</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#  <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>update</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>accesses</span><span style=' <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='co<span style='color:#109</code></pre><<span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>old</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span> <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Which</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>also</span> <span style='color:#FBFBFF;'>written</span> <span style='color:#FBFBFF;'>as:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>update</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>accesses</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>&</span><span style='color:#FBFBFF;'>1</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Access syntax</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Records</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>Elixir</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>expanded</span> <span style='color:#FBFBFF;'>at</span> <span style='color:#FBFBFF;'>compilation</span> <span style='color:#FBFBFF;'>time</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>provide</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>pattern</span> <span style='color:#FBFBFF;'>matching</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>faster</span> <span style='color:#FBFBFF;'>operations</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>For</span> <span style='color:#FBFBFF;'>example</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>clause</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>below</span> <span style='color:#FBFBFF;'>will</span> <span style='color:#FBFBFF;'>only</span> <span style='color:#FBFBFF;'>match</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>FileInfo</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>number</span> <span style='color:#FBFBFF;'>of</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>accesses</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>zero:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>enforce</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>no</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>access</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>FileInfo</span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>accesses:</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>0</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>The</span> <span style='color:#FBFBFF;'>clause</span> <span style='color:#FBFBFF;'>above</span> <span style='color:#FBFBFF;'>will</span> <span style='color:#FBFBFF;'>expand</span> <span style='color:#FBFBFF;'>to:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>enforce</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>no</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>access</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>{</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>FileInfo</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>0</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>}</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>The</span> <span style='color:#FBFBFF;'>downside</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>using</span> <span style='color:#FBFBFF;'>such</span> <span style='color:#FBFBFF;'>syntax</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>that</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>every</span> <span style='color:#FBFBFF;'>time</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>record</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>changes</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>your</span> <span style='color:#FBFBFF;'>code</span> <span style='color:#FBFBFF;'>now</span> <span style='color:#FBFBFF;'>needs</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>recompiled</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>which</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>usually</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>concern</span> <span style='color:#FBFBFF;'>since</span> <span style='color:#FBFBFF;'>Elixir</span> <span style='color:#FBFBFF;'>build</span> <span style='color:#FBFBFF;'>tools</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>default</span> <span style='color:#FBFBFF;'>recompiles</span> <span style='color:#FBFBFF;'>the</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>whole</span> <span style='color:#FBFBFF;'>project</span> <span style='color:#FBFBFF;'>whenever</span> <span style='color:#FBFBFF;'>there</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Finally</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>keep</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>mind</span> <span style='color:#FBFBFF;'>that</span> <span style='color:#FBFBFF;'>Elixir</span> <span style='color:#FBFBFF;'>triggers</span> <span style='color:#FBFBFF;'>some</span> <span style='color:#FBFBFF;'>optimizations</span> <span style='color:#FBFBFF;'>whenever</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>access</span> <span style='color:#FBFBFF;'>syntax</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>used</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>For</span> <span style='color:#FBFBFF;'>example:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>no</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>access?</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>FileInfo</span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>=</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>file</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>info</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>accesses</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>0</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Is</span> <span style='color:#FBFBFF;'>translated</span> <span style='color:#FBFBFF;'>to:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>no</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>access?</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>{</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>FileInfo</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>}</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>=</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>file</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>info</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>elem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>0</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Which</span> <span style='color:#FBFBFF;'>provides</span> <span style='color:#FBFBFF;'>faster</span> <span style='color:#FBFBFF;'>get</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>set</span> <span style='color:#FBFBFF;'>times</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>operations</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Runtime introspection</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>At</span> <span style='color:#FBFBFF;'>runtime</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>developers</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#1098F7;'>use</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>get</span> <span style='color:#FBFBFF;'>information</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>about</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>record:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>FileInfo.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:name</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i>#</i></span><span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>FileInfo</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>FileInfo.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:fields</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i>#</i></span><span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>atime:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>accesses:</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>In</span> <span style='color:#FBFBFF;'>order</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>quickly</span> <span style='color:#FBFBFF;'>access</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>index</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>one</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#1098F7;'>use</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>function:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>FileInfo.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:atime</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i>#</i></span><span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>0</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>FileInfo.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:unknown</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i>#</i></span><span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>></span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Compile-time introspection</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>At</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>compile</span> <span style='color:#FBFBFF;'>time</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>one</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>access</span> <span style='color:#FBFBFF;'>following</span> <span style='color:#FBFBFF;'>information</span> <span style='color:#FBFBFF;'>about</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>record</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>from</span> <span style='color:#FBFBFF;'>within</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>module:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>*</span> <span style='color:#FBFBFF;'>`</span><span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>`</span>   <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>keyword</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>fields</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>defaults</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>*</span> <span style='color:#FBFBFF;'>`</span><span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>`</span>   <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>keyword</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>fields</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>types</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>        <span style='color:#FBFBFF;'>defrecord</span> <span style='color:#FBFBFF;'>Foo</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>bar:</span> <span style='color:#4ECDC4;'><i>nil</i></span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>          <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>type</span> <span style='color:#FBFBFF;'>bar:</span> <span style='color:#4ECDC4;'><i>nil</i></span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>integer</span>
 <span style='color:#C19875'> ·</span>          <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span>
 <span style='color:#C19875'> ·</span>          <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>types</span>
 <span style='color:#C19875'> ·</span>        <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>prints</span> <span style='color:#FBFBFF;'>out</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>        <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>bar:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>        <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>bar:</span> <span style='color:#FBFBFF;'>{</span><span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>,</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>line:</span> <span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span><span style='color:#FBFBFF;'>[</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:integer</i></span><span style='color:#FBFBFF;'>,</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>line:</span> <span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span><span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>where</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>last</span> <span style='color:#FBFBFF;'>line</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>quoted</span> <span style='color:#FBFBFF;'>representation</span> <span style='color:#FBFBFF;'>of</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>        <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>bar:</span> <span style='color:#4ECDC4;'><i>nil</i></span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>integer</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Documentation</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>By</span> <span style='color:#FBFBFF;'>default</span> <span style='color:#FBFBFF;'>records</span> <span style='color:#FBFBFF;'>are</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>documented</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>have</span> <span style='color:#FBFBFF;'>`</span><span style='color:#C73E1D;'>@moduledoc`</span> <span style='color:#FBFBFF;'>set</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#4ECDC4;'><i>false</i></span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Types</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Every</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>defines</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>type</span> <span style='color:#FBFBFF;'>named</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>that</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>accessed</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>typespecs</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Those</span> <span style='color:#FBFBFF;'>types</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>passed</span> <span style='color:#FBFBFF;'>at</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>moment</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>defined:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>defrecord</span> <span style='color:#FBFBFF;'>User</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>name:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>string</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>age:</span> <span style='color:#FBFBFF;'>0</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>integer</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>All</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>fields</span> <span style='color:#FBFBFF;'>without</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>specified</span> <span style='color:#FBFBFF;'>type</span> <span style='color:#FBFBFF;'>are</span> <span style='color:#FBFBFF;'>assumed</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>have</span> <span style='color:#FBFBFF;'>type</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>term</span><span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Assuming</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>User</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>defined</span> <span style='color:#FBFBFF;'>above</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>it</span> <span style='color:#FBFBFF;'>could</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>used</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>typespecs</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>follow:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>handle</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>user</span><span style='color:#FBFBFF;'>(</span><span style='color:#D7B884;'>User.</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>boolean</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>If</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>developer</span> <span style='color:#FBFBFF;'>wants</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>define</span> <span style='color:#FBFBFF;'>their</span> <span style='color:#FBFBFF;'>own</span> <span style='color:#FBFBFF;'>types</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>used</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>the</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Elixir</span> <span style='color:#FBFBFF;'>allows</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>more</span> <span style='color:#FBFBFF;'>lengthy</span> <span style='color:#FBFBFF;'>definition</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>help</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>macro:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>defrecord</span> <span style='color:#FBFBFF;'>Config</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>counter:</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>failures:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@type</span> <span style='color:#FBFBFF;'>kind</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>term</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>type</span> <span style='color:#FBFBFF;'>counter:</span> <span style='color:#FBFBFF;'>integer</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>failures:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>kind</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Importing records</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>It</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>also</span> <span style='color:#FBFBFF;'>possible</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>import</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>public</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defined</span> <span style='color:#FBFBFF;'>using</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>defrecord</span><span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>set</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>private</span> <span style='color:#FBFBFF;'>macros</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>as</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>it</span> <span style='color:#FBFBFF;'>was</span> <span style='color:#FBFBFF;'>defined</span> <span style='color:#FBFBFF;'>using</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>defrecordp</span><span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>)</span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>import</span> <span style='color:#FBFBFF;'>Config</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>as:</span> <span style='color:#EAC435;'><i>:config</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>See</span> <span style='color:#FBFBFF;'>`</span><span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>import</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>defrecordp</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>documentation</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>more</span> <span style='color:#FBFBFF;'>information</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Extract</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>information</span> <span style='color:#FBFBFF;'>from</span> <span style='color:#FBFBFF;'>an</span> <span style='color:#FBFBFF;'>Erlang</span> <span style='color:#FBFBFF;'>file</span> <span style='color:#FBFBFF;'>and</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>return</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>fields</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>tuples</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Examples</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>defrecord</span> <span style='color:#FBFBFF;'>FileInfo</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:file</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>from</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>lib:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>kernel</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>include</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>hrl</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>extract</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>opts</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Record.</span><span style='color:#D7B884;'>Extractor.</span><span style='color:#FBFBFF;'>retrieve</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Main</span> <span style='color:#FBFBFF;'>entry</span> <span style='color:#FBFBFF;'>point</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>records</span> <span style='color:#FBFBFF;'>definition</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>It</span> <span style='color:#FBFBFF;'>defines</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>module</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>fields</span> <span style='color:#FBFBFF;'>specified</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Check</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>module</span> <span style='color:#FBFBFF;'>documentation</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>more</span> <span style='color:#FBFBFF;'>information</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defrecord</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>values</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>opts</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>block</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:do</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unquoted</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>unquote</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>import</span> <span style='color:#D7B884;'>Elixir.</span><span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>DSL</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>types</span>  <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Elixir.</span><span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>deffunctions</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquoted</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ENV</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>value</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>block</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Elixir.</span><span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>deftypes</span><span style='color:#FBFBFF;'>(</span><span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ENV</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>value</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>default</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>default</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Macro.</span><span style='color:#FBFBFF;'>escape</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>reverse</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Import</span> <span style='color:#FBFBFF;'>public</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>definition</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>set</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>private</span> <span style='color:#FBFBFF;'>macros</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>defined</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>`</span><span style='color:#D7B884;'>Kernel.</span><span style='color:#FBFBFF;'>defrecordp</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>This</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>useful</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>one</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>desires</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>manipulate</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>via</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>set</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>macros</span> <span style='color:#FBFBFF;'>instead</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>regular</span> <span style='color:#FBFBFF;'>access</span> <span style='color:#FBFBFF;'>syntax</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Example</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>      <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Test</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>        <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>import</span> <span style='color:#D7B884;'>File.</span><span style='color:#FBFBFF;'>Stat</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>as:</span> <span style='color:#EAC435;'><i>:file</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>stat</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>        <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>size</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>file</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>stat</span><span style='color:#03DDB2;'>(</span><span style='color:#03DDB2;'>size:</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>size</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>size</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defmacro</span> <span style='color:#FBFBFF;'>import</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>as:</span> <span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>module</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>fields</span> <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>module</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:fields</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>defmacros</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ENV</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Main</span> <span style='color:#FBFBFF;'>entry</span> <span style='color:#FBFBFF;'>point</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>private</span> <span style='color:#FBFBFF;'>records</span> <span style='color:#FBFBFF;'>definition</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>It</span> <span style='color:#FBFBFF;'>defines</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>set</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>macros</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>fields</span> <span style='color:#FBFBFF;'>specified</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>This</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>invoked</span> <span style='color:#FBFBFF;'>directly</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>`</span><span style='color:#D7B884;'>Kernel.</span><span style='color:#FBFBFF;'>defrecordp</span><span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>so</span> <span style='color:#FBFBFF;'>check</span> <span style='color:#FBFBFF;'>it</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>more</span> <span style='color:#FBFBFF;'>information</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>documentation</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defrecordp</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>fields</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>atom</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>and</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>list</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>fields</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>type</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>}</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>=</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recordp</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>split</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>fields</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>false</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>type</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>=</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>#</span><span style='color:#9A8BBB;'>{</span><span style='color:#9A8BBB;'>name</span><span style='color:#9A8BBB;'>}</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>t</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>quote</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>defmacros</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ENV</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>type</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@typep</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>recordp</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>default</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>recordp</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>default</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>true</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>recordp</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>type</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>recordp</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>split</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>quote</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>term</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>type</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>end</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defp</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>recordp</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>split</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>defaults</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>types</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>def</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>type</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>reverse</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>reverse</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>type</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>}</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>end</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@doc</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Defines</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>functions</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>skipping</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>module</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>definition</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>This</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>called</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>directly</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>by</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'>defrecord</span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>It</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>expects</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>values</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>a</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>set</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>of</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>options</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>and</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>module</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>environment</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>#</span><span style='color:#9A8BBB;'># Examples</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>CustomRecord</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>deffunctions</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:name</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:age</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ENV</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>deftypes</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:name</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:age</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>name:</span> <span style='color:#EAC435;'><i>:binary</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>age:</span> <span style='color:#EAC435;'><i>:integer</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ENV</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>deffunctions</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>values</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>env</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>values</span>  <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>value</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>convert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>escaped</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Macro.</span><span style='color:#FBFBFF;'>escape</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>contents</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>reflection</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>initializer</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>indexes</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>conversions</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>optimizable</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>updater</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>accessors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>switch</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>recorder</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>contents</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>quote</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>do:</span> <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>contents</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># Special case for bootstraping purposes</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>env</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Macro.</span><span style='color:#FBFBFF;'>Env</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>eval</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>quoted</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>contents</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>eval</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>quoted</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>contents</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>location</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Defines</span> <span style='color:#FBFBFF;'>types</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>specs</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>deftypes</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>values</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>types</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>env</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>types</span>  <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>types</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>values</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>value</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>values</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>default</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>convert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>default</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>contents</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>core</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>accessor</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>env</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Macro.</span><span style='color:#FBFBFF;'>Env</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>eval</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>quoted</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>contents</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>eval</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>quoted</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>contents</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>location</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Defines</span> <span style='color:#FBFBFF;'>macros</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>manipulating</span> <span style='color:#FBFBFF;'>records</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>This</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>called</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>directly</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>defrecordp</span><span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>It</span> <span style='color:#FBFBFF;'>expects</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>macro</span> <span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>the</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>values</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>environment</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Examples</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>CustomRecord</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>defmacros</span> <span style='color:#EAC435;'><i>:user</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:name</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:age</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ENV</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defmacros</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>values</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>env</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>tag</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>/</span><span style='color:#03DDB2;'>/</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>nil</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>escaped</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>value</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>values</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>value</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>convert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Macro.</span><span style='color:#FBFBFF;'>escape</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>contents</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>defmacrop</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>access</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>tag</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>CALLER</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>defmacrop</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keywords</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>tag</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>defmacrop</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>access</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>tag</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>CALLER</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>defmacrop</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>tag</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>defmacrop</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Record.</span><span style='color:#FBFBFF;'>dispatch</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>tag</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>CALLER</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>eval</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>quoted</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>contents</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>location</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Callbacks</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Store all optimizable fields in the record as well</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defmacro</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>before</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>compile</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:optimizable</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>optimizable</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Store fields that can be optimized and that cannot be</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># optimized as they are overriden</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>on</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>definition</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>env</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>kind</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>args</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>guards</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>body</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>tuple</span>     <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>module</span>    <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>module</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>functions</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:record</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>optimizable</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>functions</span> <span style='color:#1098F7;'>=</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>kind</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:def</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:record</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>optimized</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>functions</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>delete</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>functions</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>put</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:record</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>optimizable</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>functions</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Implements the access macro used by records.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># It returns a quoted expression that defines</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># a record or a match in case the record is</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># inside a match.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>access</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>atom</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>fields</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>keyword</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>caller</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>unless</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>expected</span> <span style='color:#FBFBFF;'>contents</span> <span style='color:#FBFBFF;'>inside</span> <span style='color:#FBFBFF;'>brackets</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>Keyword</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>in</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>match</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>caller</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>in</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>match?</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>has</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>underscore</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>has</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>key?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>underscore</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span>     <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>nil</i></span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>keyword</span>              <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>delete</span> <span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>iterator</span> <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>fn</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>default</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>each</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>new</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span> <span style='color:#1098F7;'>=</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>case</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>has</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>key?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>each</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#4ECDC4;'><i>true</i></span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>each</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#4ECDC4;'><i>false</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>in</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>match</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>has</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>underscore</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>               <span style='color:#4ECDC4;'><i>true</i></span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>underscore</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span>
 <span style='color:#C19875'> ·</span>               <span style='color:#4ECDC4;'><i>false</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#D7B884;'>Macro.</span><span style='color:#FBFBFF;'>escape</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>default</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>new</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>delete</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>each</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>match</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>remaining</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>mapfoldl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>iterator</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>remaining</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>match</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>_</span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>keys</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>remaining</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>key</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>record</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>does</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>have</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>keys:</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>keys</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Dispatch the call to either update or to</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>depending</span> <span style='color:#FBFBFF;'>on</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>args</span> <span style='color:#FBFBFF;'>given</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>dispatch</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>atom</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>fields</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>record</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>args</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>caller</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>cond</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>update</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>caller</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#4ECDC4;'><i>true</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>expected</span> <span style='color:#FBFBFF;'>arguments</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>compile</span> <span style='color:#FBFBFF;'>time</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>compile</span> <span style='color:#FBFBFF;'>time</span> <span style='color:#FBFBFF;'>keywords</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Implements the update macro defined by defmacros.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># It returns a quoted expression that represents</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># the access given by the keywords.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>update</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>caller</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>unless</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>expected</span> <span style='color:#FBFBFF;'>arguments</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>compile</span> <span style='color:#FBFBFF;'>time</span> <span style='color:#FBFBFF;'>keywords</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>caller</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>in</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>match?</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>cannot</span> <span style='color:#FBFBFF;'>invoke</span> <span style='color:#FBFBFF;'>update</span> <span style='color:#FBFBFF;'>style</span> <span style='color:#FBFBFF;'>macro</span> <span style='color:#FBFBFF;'>inside</span> <span style='color:#FBFBFF;'>match</span> <span style='color:#FBFBFF;'>context</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>reduce</span> <span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>value</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>setelement</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>record</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>does</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>have</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>key:</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Implements the get macro defined by defmacros.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># It returns a quoted expression that represents</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># getting the value of a given field.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>get</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>atom</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>fields</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>var</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>key</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>element</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>record</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>does</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>have</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>key:</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Implements to</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keywords</span> <span style='color:#FBFBFF;'>macro</span> <span style='color:#FBFBFF;'>defined</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>defmacros</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># It returns a quoted expression that represents</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># converting record to keywords list.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>to</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>keywords</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>atom</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>fields</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>record</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>extra</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>cache</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>keywords</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>map</span> <span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>default</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>element</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>extra</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>keywords</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Implements to</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>macro</span> <span style='color:#FBFBFF;'>defined</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>defmacros</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># It returns a quoted expression that represents</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># extracting given fields from record.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>keys</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>unless</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>expected</span> <span style='color:#FBFBFF;'>arguments</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>compile</span> <span style='color:#FBFBFF;'>time</span> <span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>extra</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>cache</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>list</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>map</span> <span style='color:#FBFBFF;'>keys</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>fn</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do:</span> <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>element</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>record</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>does</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>have</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>key:</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>extra</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>cache</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>kind</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>kind</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>cache</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>x</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>x</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Function generation</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Define </i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>1</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>2</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>reflection</span> <span style='color:#FBFBFF;'>functions</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># that returns the record names and fields.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Note that fields are *not* keywords. They are in the same</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># order as given as parameter and reflects the order of the</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># fields in the tuple.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># </i></span><span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Examples</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     defrecord FileInfo, atime</i></span><span style='color:#1098F7;'>:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mtime:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     FileInfo.</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:name</i></span><span style='color:#FBFBFF;'>)</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>FileInfo</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     FileInfo.</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:fields</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#565857;'><i>#</i></span><span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>atime:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mtime:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>reflection</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>kind</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>kind</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:name</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>record</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:fields</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Define initializers methods. For a declaration like</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     defrecord FileInfo, atime</i></span><span style='color:#1098F7;'>:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mtime:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># It will define three methods</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def new</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#       new</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     end</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def new</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#       </i></span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>FileInfo</span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>nil</i></span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     end</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def new</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#       </i></span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>FileInfo</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:atime</i></span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:mtime</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     end</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>initializer</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>defaults</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>value</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>value</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># For each value, define a piece of code that will receive</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># an ordered dict of options </i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>it</span> <span style='color:#FBFBFF;'>will</span> <span style='color:#FBFBFF;'>try</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>fetch</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># the given key from the ordered dict, falling back to the</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># default value if one does not exist.</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>selective</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>values</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do:</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>v</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>new</span><span style='color:#9A8BBB;'>(</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>new</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>new</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>defaults</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>new</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>opts</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>list</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>opts</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>selective</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>new</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>tuple</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>tuple</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>tuple</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>setelement</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Define method to get index of a given key.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Useful if you need to know position of the key for such applications as</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#  - ets</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#  - mnesia</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># For a declaration like</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     defrecord FileInfo, atime</i></span><span style='color:#1098F7;'>:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mtime:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># It will define following method</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def </i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:atime</i></span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>2</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def </i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:mtime</i></span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>3</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def </i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>indexes</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quoted</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>values</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>index</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>unquote</span><span style='color:#03DDB2;'>(</span><span style='color:#03DDB2;'>k</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>quoted</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>index</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>index</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>key</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Define converters method</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>s</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>For</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>declaration</span> <span style='color:#FBFBFF;'>like:</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     defrecord FileInfo, atime</i></span><span style='color:#1098F7;'>:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mtime:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># It will define one method, to</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keywords</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>which</span> <span style='color:#FBFBFF;'>will</span> <span style='color:#FBFBFF;'>return</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>Keyword</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#    </i></span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>atime:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mtime:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>conversions</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>sorted</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>values</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>quote</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>do:</span> <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>element</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>to</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>keywords</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>record</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:orddict</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>from</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>sorted</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Implement accessors. For a declaration like</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     defrecord FileInfo, atime</i></span><span style='color:#1098F7;'>:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mtime:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># It will define four methods</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def atime</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#       elem</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     end</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def mtime</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#       elem</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     end</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def atime</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#       set</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>elem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     end</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def mtime</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#       set</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>elem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     end</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def atime</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#       set</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>elem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>elem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     end</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     def mtime</i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#       set</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>elem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>elem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#     end</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>accessors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>exception</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>accessors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>accessors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>default</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>i</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>update</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>update</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>contents</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>unquote</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>key</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>record</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>element</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>unquote</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>key</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>value</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>record</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>setelement</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>unquote</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>update</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>function</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>record</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>setelement</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>function</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>element</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>contents</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>accessors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>accessors</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>i</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Define an updater method that receives a</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># keyword list and updates the record.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>updater</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>fields</span> <span style='color:#1098F7;'>=</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>default</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>values</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>index</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>keywords</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>elem</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>contents</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fields</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>update</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>record</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>record</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>update</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>keywords</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>record</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>contents</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>optimizable</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>optimized</span> <span style='color:#4ECDC4;'><i>true</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>optimizable</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@before</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>compile</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>before</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>compile</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@on</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>definition</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>on</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>definition</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>switch</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>recorder</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do:</span> <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>optimized</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Types/specs generation</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>core</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>types</span>   <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>spec</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>spec</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>options</span> <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>values</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>else:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>values</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unless</span> <span style='color:#D7B884;'>Kernel.</span><span style='color:#D7B884;'>Typespec.</span><span style='color:#FBFBFF;'>defines</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>type?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:t</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@type</span> <span style='color:#FBFBFF;'>t</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unless</span> <span style='color:#D7B884;'>Kernel.</span><span style='color:#D7B884;'>Typespec.</span><span style='color:#FBFBFF;'>defines</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>type?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:options</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@type</span> <span style='color:#FBFBFF;'>options</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>new</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>t</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>new</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>options</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>t</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keywords</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>options</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>update</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>t</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:name</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>atom</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:fields</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>non</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>neg</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>integer</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>foldl</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>]</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>t</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>accessor</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>exception</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>accessor</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>accessor</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>default</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>spec</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>i</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>update</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>update</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>contents</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>key</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>t</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>update</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>t</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>accessor</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>contents</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>accessor</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>i</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>acc</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Helpers</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>all</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>&</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>x</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>x</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#4ECDC4;'><i>true</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>keyword</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>convert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>nil</i></span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>convert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>other</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>function</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>field</span> <span style='color:#FBFBFF;'>default</span> <span style='color:#FBFBFF;'>value</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>cannot</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>function</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>convert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>other</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>reference</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>pid</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>port</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>field</span> <span style='color:#FBFBFF;'>default</span> <span style='color:#FBFBFF;'>value</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>cannot</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>reference</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>pid</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>port</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>convert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>tuple</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>tuple</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>convert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>message:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>record</span> <span style='color:#FBFBFF;'>field</span> <span style='color:#FBFBFF;'>name</span> <span style='color:#FBFBFF;'>has</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>an</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>got</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>i</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>i</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>i</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>index</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>i</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>find</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>matches</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>name</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>v</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>matches</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>h</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>h</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>_</span>     <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>term</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Record.</span><span style='color:#9A8BBB;'>DSL</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Defines</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>type</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>each</span> <span style='color:#FBFBFF;'>field</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Expects</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>keyword</span> <span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defmacro</span> <span style='color:#FBFBFF;'>record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>escaped</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>lc</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>v</span> <span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>inlist</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>{</span> <span style='color:#FBFBFF;'>k</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Macro.</span><span style='color:#FBFBFF;'>escape</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>v</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>types</span> <span style='color:#D7B884;'>Keyword.</span><span style='color:#FBFBFF;'>merge</span><span style='color:#FBFBFF;'>(</span><span style='color:#C73E1D;'>@record</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>types</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>escaped</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> </code></pre><br></file>