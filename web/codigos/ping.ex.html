<style> pre{background-color: #292F36;} </style><file name='ping.ex'ubicacion='media/shared/partner1/ping.ex'><pre><code> <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># If you get errors running 254 ping commands it</i></span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>s</span> <span style='color:#FBFBFF;'>probably</span> <span style='color:#FBFBFF;'>due</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>number</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># of open files.  You can </i></span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>fix</span><span style='color:#FBFBFF;'>"</span> <span style='color:#FBFBFF;'>this</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>running</span> <span style='color:#FBFBFF;'>this</span> <span style='color:#FBFBFF;'>command</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>terminal</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># session before running this program</i></span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#   ulimit -n 1024</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i>#</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># If the limit is 256 </i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>default</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>then</span> <span style='color:#FBFBFF;'>we</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>run</span> <span style='color:#FBFBFF;'>120</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>so</span> <span style='color:#FBFBFF;'>before</span> <span style='color:#FBFBFF;'>we</span> <span style='color:#FBFBFF;'>run</span> <span style='color:#FBFBFF;'>out</span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># of file descriptors.</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Ping</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Ping</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>class</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>C</span> <span style='color:#FBFBFF;'>subnet</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>find</span> <span style='color:#FBFBFF;'>hosts</span> <span style='color:#FBFBFF;'>that</span> <span style='color:#FBFBFF;'>respond</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>To</span> <span style='color:#FBFBFF;'>run</span> <span style='color:#FBFBFF;'>from</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>command</span> <span style='color:#FBFBFF;'>line:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>$</span> <span style='color:#FBFBFF;'>elixir</span> <span style='color:#FBFBFF;'>9</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>ping</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>exs</span> <span style='color:#FBFBFF;'>192</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>168</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>x</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Ping</span> <span style='color:#FBFBFF;'>an</span> <span style='color:#FBFBFF;'>IP</span> <span style='color:#FBFBFF;'>asynchronously</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>tuple</span> <span style='color:#FBFBFF;'>back</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>parent</span> <span style='color:#FBFBFF;'>saying</span> <span style='color:#FBFBFF;'>what</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>has</span> <span style='color:#FBFBFF;'>happened:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>pingable?</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>where</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>pingable?</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>tells</span> <span style='color:#FBFBFF;'>us</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>pingable</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>error</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>some</span> <span style='color:#FBFBFF;'>error</span> <span style='color:#FBFBFF;'>caused</span> <span style='color:#FBFBFF;'>us</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>able</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>run</span> <span style='color:#FBFBFF;'>the</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>ping</span> <span style='color:#FBFBFF;'>command</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>ping</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>async</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>ip</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>parent</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>send</span> <span style='color:#FBFBFF;'>parent</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>run</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ping</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Ping</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>single</span> <span style='color:#FBFBFF;'>IP</span> <span style='color:#FBFBFF;'>address</span> <span style='color:#FBFBFF;'>returning</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>tuple</span> <span style='color:#FBFBFF;'>which</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>ping</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>async</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>return</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>run</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>ping</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>ip</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># This is a Ruby-ish way of dealing with failure...</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># TODO</i></span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>Discover</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Elixir</span> <span style='color:#FBFBFF;'>way</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>try</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># return code should be handled somehow with pattern matching</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>cmd</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>output</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>System.</span><span style='color:#FBFBFF;'>cmd</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>ping</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ping</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>alive?</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#D7B884;'>Regex.</span><span style='color:#FBFBFF;'>match?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>~</span><span style='color:#FBFBFF;'>r</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>100</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>?</span><span style='color:#FBFBFF;'>%</span> <span style='color:#FBFBFF;'>packet</span> <span style='color:#FBFBFF;'>loss</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>cmd</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>output</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>alive?</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>rescue</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>e</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>e</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>ping</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>args</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>ip</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>opt</span> <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>darwin?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>W</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>else:</span> <span style='color:#FBFBFF;'>"</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>w</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>"</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>c</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>opt</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>5</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>s</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>darwin?</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>output</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>System.</span><span style='color:#FBFBFF;'>cmd</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>uname</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>String.</span><span style='color:#FBFBFF;'>trim</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>trailing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>output</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>Darwin</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Subnet</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Ping</span> <span style='color:#FBFBFF;'>all</span> <span style='color:#FBFBFF;'>IPs</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>class</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>C</span> <span style='color:#FBFBFF;'>subnet</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>return</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>map</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>results</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>ping</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>subnet</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>all</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>ips</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>subnet</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>each</span> <span style='color:#FBFBFF;'>all</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>ip</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Task.start gives better logging than spawn when things go awry.</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># http</i></span><span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>elixir</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>lang</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>org</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>getting</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>started</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>processes</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>html</span><span style='color:#565857;'><i>#tasks</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Task.</span><span style='color:#FBFBFF;'>start</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Ping</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:ping</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>async</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>self</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>wait</span> <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>count</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>all</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Given</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>class</span><span style='color:#1098F7;'>-</span><span style='color:#FBFBFF;'>C</span> <span style='color:#FBFBFF;'>subnet</span> <span style='color:#FBFBFF;'>string</span> <span style='color:#FBFBFF;'>like</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>192</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>168</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>x</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>return</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>all</span> <span style='color:#FBFBFF;'>254</span> <span style='color:#FBFBFF;'>IPs</span> <span style='color:#FBFBFF;'>therein</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>ips</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>subnet</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>subnet</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Regex.</span><span style='color:#FBFBFF;'>run</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>~</span><span style='color:#FBFBFF;'>r</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>^</span><span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>d</span><span style='color:#1098F7;'>+</span><span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>d</span><span style='color:#1098F7;'>+</span><span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>d</span><span style='color:#1098F7;'>+</span><span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>subnet</span><span style='color:#FBFBFF;'>)</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>at</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>254</span><span style='color:#FBFBFF;'>)</span> <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>map</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>subnet</span><span style='color:#FBFBFF;'>}</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>i</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>results</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>results</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>results</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>remaining</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>receive</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>pingable?</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>results</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Map.</span><span style='color:#FBFBFF;'>put</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>results</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>pingable?</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>results</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>remaining</span> <span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>error</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>error</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>wait</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>results</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>remaining</span> <span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># Command-line execution support</i></span>
 <span style='color:#C19875'> ·</span> <span style='color:#565857;'><i># TODO is there a way to check if this script is being executed directly </i></span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>vs</span> <span style='color:#FBFBFF;'>imported</span> <span style='color:#FBFBFF;'>elsewhere</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>?</span>
 <span style='color:#C19875'> ·</span> <span style='color:#FBFBFF;'>case</span> <span style='color:#D7B884;'>System.</span><span style='color:#FBFBFF;'>argv</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>subnet</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>results</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Subnet.</span><span style='color:#FBFBFF;'>ping</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>subnet</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>results</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>filter</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>exists</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>exists</span> <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>map</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>ip</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>ip</span> <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>sort</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>join</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>n</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#B80C09;'>|></span> <span style='color:#D7B884;'>IO.</span><span style='color:#FBFBFF;'>puts</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>start</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>SubnetTest</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>use</span> <span style='color:#D7B884;'>ExUnit.</span><span style='color:#FBFBFF;'>Case</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>test</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>ips</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>ips</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Subnet.</span><span style='color:#FBFBFF;'>ips</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>192</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>168</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>x</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>assert</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>count</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>ips</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>254</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>assert</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>at</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>ips</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>192</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>168</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>assert</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>at</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>ips</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>253</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>192</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>168</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>254</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> </code></pre><br></file>