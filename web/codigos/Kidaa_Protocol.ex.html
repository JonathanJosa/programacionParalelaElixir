<style> pre{background-color: #292F36;} </style><file name='Kidaa_Protocol.ex'ubicacion='media/searchCode/P2/Kidaa_Protocol.ex'><pre><code> <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Protocol</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@moduledoc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Functions</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>working</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>protocols</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Defines</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>new</span> <span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>function</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Protocols</span> <span style='color:#1098F7;'>do</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>allow</span> <span style='color:#FBFBFF;'>functions</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>defined</span> <span style='color:#FBFBFF;'>directly</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>instead</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>the</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>regular</span> <span style='color:#FBFBFF;'>`</span><span style='color:#D7B884;'>Kernel.</span><span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'>/</span><span style='color:#9A8BBB;'>*</span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>macros</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>are</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>replaced</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>by</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>this</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>macro</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>which</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defines</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>protocol</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>functions</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>with</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>appropriate</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>callbacks</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defmacro</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>def</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>signature</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defmacro</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>def</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>{</span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>args</span><span style='color:#03DDB2;'>}</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>args</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>=</span><span style='color:#9A8BBB;'>=</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>[</span><span style='color:#9A8BBB;'>]</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>or</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>atom</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>args</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>functions</span> <span style='color:#FBFBFF;'>expect</span> <span style='color:#FBFBFF;'>at</span> <span style='color:#FBFBFF;'>least</span> <span style='color:#FBFBFF;'>one</span> <span style='color:#FBFBFF;'>argument</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defmacro</span> <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>{</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>args</span><span style='color:#03DDB2;'>}</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>atom</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>and</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>list</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>args</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>arity</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>args</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>seq</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>arity</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>quote</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>term</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>args</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>quote</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>call</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>args</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>seq</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>arity</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>                   <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>{</span><span style='color:#D7B884;'>String.</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'><</span><span style='color:#1098F7;'><</span><span style='color:#FBFBFF;'>?</span><span style='color:#FBFBFF;'>x</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>i</span> <span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>64</span><span style='color:#1098F7;'>></span><span style='color:#1098F7;'>></span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>call</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>args</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>quote</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>call</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>name</span>  <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>arity</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>arity</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@functions</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>arity</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#C73E1D;'>@functions</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Generate a fake definition with the user</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># signature that will be used by docs</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Kernel.</span><span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>unquote</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>unquote</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>splicing</span><span style='color:#03DDB2;'>(</span><span style='color:#03DDB2;'>args</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'># Generate the actual implementation</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Kernel.</span><span style='color:#9A8BBB;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>unquote</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>unquote</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>splicing</span><span style='color:#03DDB2;'>(</span><span style='color:#03DDB2;'>call</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>args</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>call</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Convert the spec to callback if possible,</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># otherwise generate a dummy callback</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Protocol.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>arity</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@callback</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>splicing</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>type</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>term</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defmacro</span> <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>_</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>invalid</span> <span style='color:#FBFBFF;'>args</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>inside</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>defprotocol</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>end</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@doc</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Checks</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>if</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>the</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>given</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>module</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>loaded</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>and</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>protocol</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Returns</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'>:ok</span><span style='color:#9A8BBB;'>`</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>if</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>so</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>otherwise</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>raises</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>ArgumentError.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'>"</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>@spec</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>assert</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>protocol</span><span style='color:#9A8BBB;'>!</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>module</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:</span><span style='color:#9A8BBB;'>:</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:ok</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>|</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>no</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>return</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>assert</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>protocol</span><span style='color:#9A8BBB;'>!</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>module</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>extra</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>case</span> <span style='color:#D7B884;'>Code.</span><span style='color:#FBFBFF;'>ensure</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>compiled</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:module</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>^</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>available</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>extra</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>try</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:name</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>rescue</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>UndefinedFunctionError</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>extra</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Checks</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>module</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>loaded</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>an</span> <span style='color:#FBFBFF;'>implementation</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Returns</span> <span style='color:#FBFBFF;'>`</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>`</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>so</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>otherwise</span> <span style='color:#FBFBFF;'>raises</span> <span style='color:#D7B884;'>ArgumentError.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#EAC435;'><i>:ok</i></span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>no</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>return</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>assert</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>!</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>protocol</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>base</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>base</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>base</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>extra</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>impl</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>concat</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>base</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>case</span> <span style='color:#D7B884;'>Code.</span><span style='color:#FBFBFF;'>ensure</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>compiled</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:module</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>^</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>              <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>available</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>extra</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>try</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:protocol</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>rescue</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>UndefinedFunctionError</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>"</span><span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>an</span> <span style='color:#FBFBFF;'>implementation</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>extra</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>^</span><span style='color:#FBFBFF;'>protocol</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>other</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>ArgumentError</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>expected</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>an</span> <span style='color:#FBFBFF;'>implementation</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>got:</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>extra</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Derive</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>`</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defmacro</span> <span style='color:#FBFBFF;'>derive</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>options</span> <span style='color:#FBFBFF;'>\</span><span style='color:#FBFBFF;'>\</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>module</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Protocol.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>derive</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ENV</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Consolidation</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Extract</span> <span style='color:#FBFBFF;'>all</span> <span style='color:#FBFBFF;'>protocols</span> <span style='color:#FBFBFF;'>from</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>paths</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>The</span> <span style='color:#FBFBFF;'>paths</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>either</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>char</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>string</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>Internally</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>they</span> <span style='color:#FBFBFF;'>are</span> <span style='color:#FBFBFF;'>worked</span> <span style='color:#FBFBFF;'>on</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>char</span> <span style='color:#FBFBFF;'>lists</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>so</span> <span style='color:#FBFBFF;'>passing</span> <span style='color:#FBFBFF;'>them</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>lists</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>avoid</span> <span style='color:#FBFBFF;'>extra</span> <span style='color:#FBFBFF;'>conversion</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Does</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>load</span> <span style='color:#FBFBFF;'>any</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>protocols</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Examples</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Get Elixir</i></span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>s</span> <span style='color:#FBFBFF;'>ebin</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>retrieve</span> <span style='color:#FBFBFF;'>all</span> <span style='color:#FBFBFF;'>protocols</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>iex</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>path</span> <span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:code</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>lib</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>dir</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:elixir</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:ebin</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>iex</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>mods</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Protocol.</span><span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocols</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>iex</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>Enumerable</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>mods</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#4ECDC4;'><i>true</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocols</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>char</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#D7B884;'>String.</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>extract</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>protocols</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>paths</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>matching</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>by</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span> <span style='color:#FBFBFF;'>paths</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>'</span><span style='color:#D7B884;'>Elixir.</span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>fn</span> <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>attributes</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>attributes</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:protocol</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>any:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>consolidated:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>module</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Extract</span> <span style='color:#FBFBFF;'>all</span> <span style='color:#FBFBFF;'>types</span> <span style='color:#FBFBFF;'>implemented</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>from</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>paths</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>The</span> <span style='color:#FBFBFF;'>paths</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>either</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>char</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>string</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>Internally</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>they</span> <span style='color:#FBFBFF;'>are</span> <span style='color:#FBFBFF;'>worked</span> <span style='color:#FBFBFF;'>on</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>char</span> <span style='color:#FBFBFF;'>lists</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>so</span> <span style='color:#FBFBFF;'>passing</span> <span style='color:#FBFBFF;'>them</span> <span style='color:#FBFBFF;'>as</span> <span style='color:#FBFBFF;'>lists</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>avoid</span> <span style='color:#FBFBFF;'>extra</span> <span style='color:#FBFBFF;'>conversion</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Does</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>load</span> <span style='color:#FBFBFF;'>any</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>implementations</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Examples</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Get Elixir</i></span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>s</span> <span style='color:#FBFBFF;'>ebin</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>retrieve</span> <span style='color:#FBFBFF;'>all</span> <span style='color:#FBFBFF;'>protocols</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>iex</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>path</span> <span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:code</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>lib</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>dir</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:elixir</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:ebin</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>iex</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>mods</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Protocol.</span><span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impls</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Enumerable</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>iex</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>List</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>mods</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#4ECDC4;'><i>true</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impls</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>char</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#D7B884;'>String.</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>extract</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impls</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>protocol</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>paths</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>atom</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>protocol</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>prefix</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Atom.</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>char</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>+</span><span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>'</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>matching</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>by</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span> <span style='color:#FBFBFF;'>paths</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>prefix</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>attributes</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>attributes</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:impl</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>protocol:</span> <span style='color:#FBFBFF;'>^</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>for</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>matching</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>by</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>paths</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>prefix</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>path</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>paths</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>        <span style='color:#FBFBFF;'>file</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>dir</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>        <span style='color:#FBFBFF;'>mod</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>from</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>prefix</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>        <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>mod</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>dir</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>case</span> <span style='color:#EAC435;'><i>:file</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>dir</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>files</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>files</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>dir</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>dir</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>char</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>from</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>prefix</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>prefix</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>prefix</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#EAC435;'><i>:filename</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>extension</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>'</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>from</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:filename</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>join</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>path</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>from</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>case</span> <span style='color:#EAC435;'><i>:beam</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>lib</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>chunks</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:attributes</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>attributes:</span> <span style='color:#FBFBFF;'>attributes</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>attributes</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>        <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>          <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defmacrop</span> <span style='color:#1098F7;'>if</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ok</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>expr</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>call</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>expr</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#D7B884;'>Macro.</span><span style='color:#FBFBFF;'>pipe</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>quote</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>var</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>call</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>other</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>other</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Returns</span> <span style='color:#4ECDC4;'><i>true</i></span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>was</span> <span style='color:#FBFBFF;'>consolidated</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>consolidated?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>boolean</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>consolidated?</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>protocol</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:attributes</i></span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:protocol</i></span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:consolidated</i></span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Receives</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>and</span> <span style='color:#FBFBFF;'>a</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>implementations</span> <span style='color:#FBFBFF;'>and</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>consolidates</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>Consolidation</span> <span style='color:#FBFBFF;'>happens</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>changing</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>`</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>abstract</span> <span style='color:#FBFBFF;'>format</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>have</span> <span style='color:#FBFBFF;'>fast</span> <span style='color:#FBFBFF;'>lookup</span> <span style='color:#FBFBFF;'>rules</span><span style='color:#FBFBFF;'>.</span> <span style='color:#FBFBFF;'>Usually</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>list</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>implementations</span> <span style='color:#FBFBFF;'>to</span> <span style='color:#1098F7;'>use</span> <span style='color:#FBFBFF;'>during</span> <span style='color:#FBFBFF;'>consolidation</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>are</span> <span style='color:#FBFBFF;'>retrieved</span> <span style='color:#FBFBFF;'>with</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>help</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>extract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impls</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>`</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>It</span> <span style='color:#FBFBFF;'>returns</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>updated</span> <span style='color:#FBFBFF;'>version</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>bytecode</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>A</span> <span style='color:#FBFBFF;'>given</span> <span style='color:#FBFBFF;'>bytecode</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>implementation</span> <span style='color:#FBFBFF;'>can</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>checked</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>to</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>consolidated</span> <span style='color:#FBFBFF;'>or</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>by</span> <span style='color:#FBFBFF;'>analyzing</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>protocol</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>attribute:</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Protocol.</span><span style='color:#FBFBFF;'>consolidated?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>Enumerable</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>If</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>first</span> <span style='color:#FBFBFF;'>element</span> <span style='color:#FBFBFF;'>of</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>tuple</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#4ECDC4;'><i>true</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>it</span> <span style='color:#FBFBFF;'>means</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>was</span> <span style='color:#FBFBFF;'>consolidated</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>This</span> <span style='color:#FBFBFF;'>function</span> <span style='color:#FBFBFF;'>does</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>load</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>protocol</span> <span style='color:#FBFBFF;'>at</span> <span style='color:#FBFBFF;'>any</span> <span style='color:#FBFBFF;'>point</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>nor</span> <span style='color:#FBFBFF;'>loads</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>new</span> <span style='color:#FBFBFF;'>bytecode</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>the</span> <span style='color:#FBFBFF;'>compiled</span> <span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>However</span> <span style='color:#FBFBFF;'>each</span> <span style='color:#FBFBFF;'>implementation</span> <span style='color:#FBFBFF;'>must</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>available</span> <span style='color:#FBFBFF;'>and</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>it</span> <span style='color:#FBFBFF;'>will</span> <span style='color:#FBFBFF;'>be</span> <span style='color:#FBFBFF;'>loaded</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>consolidate</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>|</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:not</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>a</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>|</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:no</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>consolidate</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>protocol</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>types</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>atom</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>protocol</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#B80C09;'>|></span> <span style='color:#1098F7;'>if</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ok</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>debug</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#B80C09;'>|></span> <span style='color:#1098F7;'>if</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ok</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>compile</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@docs</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>chunk</span> <span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>ExDc</span><span style='color:#FBFBFF;'>'</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ids</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:abstract</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>code</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:attributes</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#C73E1D;'>@docs</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>opts</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:allow</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>missing</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>chunks</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>case</span> <span style='color:#EAC435;'><i>:beam</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>lib</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>chunks</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>ids</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>^</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:abstract</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>code</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>raw</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>abstract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>code</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>                          <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:attributes</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>attributes</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>                          <span style='color:#FBFBFF;'>{</span><span style='color:#C73E1D;'>@docs</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>docs</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>attributes</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:protocol</i></span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>any:</span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>consolidated:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>abstract</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>code</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>docs</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:not</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>a</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:no</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>file</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>case</span> <span style='color:#EAC435;'><i>:code</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>which</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>atom</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>module</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>file</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>file</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Change the debug information to the optimized</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># impl</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>/</span><span style='color:#FBFBFF;'>1</span> <span style='color:#FBFBFF;'>dispatch</span> <span style='color:#FBFBFF;'>version</span><span style='color:#FBFBFF;'>.</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>debug</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>code</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>docs</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>types</span>   <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>else:</span> <span style='color:#D7B884;'>List.</span><span style='color:#FBFBFF;'>delete</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Any</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>all</span>     <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>Any</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>+</span><span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>guard</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>builtin</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>mod</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>structs</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>types</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>all</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>code</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>structs</span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>false</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>ret</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>ret</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>docs</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>other</span>      <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>other</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:attribute</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:protocol</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>structs</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>opts</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>any:</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:fallback</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>consolidated:</span> <span style='color:#4ECDC4;'><i>true</i></span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>structs</span><span style='color:#FBFBFF;'>,</span> <span style='color:#4ECDC4;'><i>true</i></span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>                     <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:attribute</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:protocol</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:function</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:impl</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>structs</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>fallback</span> <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>Any</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>load</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Any</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>else:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>clauses</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>guard</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>builtin</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>                   <span style='color:#FBFBFF;'>mod</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>                   <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>builtin</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clause</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>guard</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>clauses</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clause</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>clauses</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>+</span><span style='color:#1098F7;'>+</span>
 <span style='color:#C19875'> ·</span>               <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clause</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fallback</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>structs</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>                     <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:function</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:impl</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>clauses</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:function</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:struct</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>structs</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>fallback</span> <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>Any</span> <span style='color:#FBFBFF;'>in</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>load</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Any</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>else:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>clauses</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>struct</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>structs</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>each</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clause</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>clauses</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>clauses</span> <span style='color:#1098F7;'>+</span><span style='color:#1098F7;'>+</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clause</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>fallback</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>structs</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>                     <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:function</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:struct</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>clauses</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>h</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>h</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>change</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>types</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Enum.</span><span style='color:#FBFBFF;'>reverse</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>acc</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:error</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:not</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>a</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>builtin</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clause</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>guard</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:clause</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:var</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:x</i></span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:call</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:remote</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>guard</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:var</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:x</i></span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>load</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clause</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:clause</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:map</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:map</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>field</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>exact</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:var</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:x</i></span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:call</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:remote</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:erlang</i></span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:is</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:var</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:x</i></span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:call</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:struct</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:var</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:x</i></span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>each</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clause</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:clause</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>load</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>other</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>clause</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:clause</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:var</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:atom</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>value</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>load</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>concat</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:target</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i># Finally compile the module and emit its bytecode.</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>compile</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>code</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>docs</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>opts</span> <span style='color:#1098F7;'>=</span> <span style='color:#1098F7;'>if</span> <span style='color:#D7B884;'>Code.</span><span style='color:#FBFBFF;'>compiler</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>options</span><span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:debug</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:debug</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>else:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>^</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>warnings</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:compile</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>forms</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>code</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:return</i></span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>unless</span> <span style='color:#FBFBFF;'>docs</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:missing</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>chunk</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>binary</span> <span style='color:#1098F7;'>=</span> <span style='color:#EAC435;'><i>:elixir</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>add</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>beam</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>,</span> <span style='color:#C73E1D;'>@docs</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>chunk</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>docs</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:ok</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>binary</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Definition callbacks</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>protocol</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>do:</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>block</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>unquote</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># We don</i></span><span style='color:#FBFBFF;'>'</span><span style='color:#FBFBFF;'>t</span> <span style='color:#FBFBFF;'>allow</span> <span style='color:#FBFBFF;'>function</span> <span style='color:#FBFBFF;'>definition</span> <span style='color:#FBFBFF;'>inside</span> <span style='color:#FBFBFF;'>protocols</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>import</span> <span style='color:#FBFBFF;'>Kernel</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>except:</span> <span style='color:#FBFBFF;'>[</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>defmacrop:</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defmacrop:</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defmacro:</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defmacro:</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>defp:</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>defp:</span> <span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>def:</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>def:</span> <span style='color:#FBFBFF;'>2</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># Import the new dsl that holds the new def</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>import</span> <span style='color:#FBFBFF;'>Protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>only:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>def:</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># Compile with debug info for consolidation</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@compile</span> <span style='color:#EAC435;'><i>:debug</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>info</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># Set up a clear slate to store defined functions</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@functions</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>any</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># Invoke the user given block</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>block</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#565857;'><i># Finalize expansion</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>after</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>defprotocol</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>after</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>defprotocol</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#FBFBFF;'>bind</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>quoted:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>builtin:</span> <span style='color:#FBFBFF;'>builtin</span><span style='color:#FBFBFF;'>]</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>term</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Kernel.</span><span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>for</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>data</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'># Define the implementation for structs.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>#</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'># It simply delegates to struct</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>for</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>which</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>then</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'># optimized during protocol consolidation.</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>Kernel.</span><span style='color:#9A8BBB;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>for</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>%</span><span style='color:#03DDB2;'>{</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>struct</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>_</span><span style='color:#03DDB2;'>:</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>struct</span><span style='color:#03DDB2;'>}</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:erlang</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>atom</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>struct</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Define the implementation for builtins.</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>guard</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>builtin</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>target</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>concat</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Kernel.</span><span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>for</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>data</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>:erlang</span><span style='color:#9A8BBB;'>.</span><span style='color:#9A8BBB;'>unquote</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>guard</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>data</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>target</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#4ECDC4;'><i>true</i></span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>target</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:target</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#4ECDC4;'><i>false</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>term</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>no</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>return</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Kernel.</span><span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>for</span><span style='color:#9A8BBB;'>!</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>data</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>raise</span><span style='color:#FBFBFF;'>(</span><span style='color:#D7B884;'>Protocol.</span><span style='color:#FBFBFF;'>UndefinedError</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>protocol:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>value:</span> <span style='color:#FBFBFF;'>data</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Internal handler for Any</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>if</span> <span style='color:#C73E1D;'>@fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>any</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Kernel.</span><span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>Any</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#4ECDC4;'><i>true</i></span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>.</span><span style='color:#D7B884;'>Any.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:target</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#4ECDC4;'><i>false</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>           <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Kernel.</span><span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#4ECDC4;'><i>nil</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Internal handler for Structs</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Kernel.</span><span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>target</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>concat</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>case</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>target</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#4ECDC4;'><i>true</i></span>  <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>target</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:target</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#4ECDC4;'><i>false</i></span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Check if compilation is available internally</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Kernel.</span><span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>target</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Code.</span><span style='color:#FBFBFF;'>ensure</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>compiled?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>target</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>and</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>function</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>exported?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>target</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Inline any and struct implementations</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@compile</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:inline</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>for?:</span> <span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>unless</span> <span style='color:#D7B884;'>Kernel.</span><span style='color:#D7B884;'>Typespec.</span><span style='color:#FBFBFF;'>defines</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>type?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:t</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>0</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@type</span> <span style='color:#FBFBFF;'>t</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>term</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># Store information as an attribute so it</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#565857;'><i># can be read without loading the module.</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>register</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:protocol</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>persist:</span> <span style='color:#4ECDC4;'><i>true</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@protocol</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>any:</span> <span style='color:#1098F7;'>!</span><span style='color:#1098F7;'>!</span><span style='color:#C73E1D;'>@fallback</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>any</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>consolidated:</span> <span style='color:#4ECDC4;'><i>false</i></span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:name</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:functions</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#D7B884;'>Protocol.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>functions</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#C73E1D;'>@functions))</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Kernel.</span><span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>protocol</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:name</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Kernel.</span><span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>protocol</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:functions</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>sort</span><span style='color:#FBFBFF;'>(</span><span style='color:#C73E1D;'>@functions))</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>functions</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>spec</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>functions</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>spec</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>[</span><span style='color:#03DDB2;'>h</span><span style='color:#03DDB2;'>|</span><span style='color:#03DDB2;'>t</span><span style='color:#03DDB2;'>]</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'></span><span style='color:#9A8BBB;'>
</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>foldl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>&</span><span style='color:#FBFBFF;'>{</span><span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>&</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>&</span><span style='color:#FBFBFF;'>2</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>h</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>t</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>quote</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>protocol</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>opts</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>do</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>defimpl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>keysort</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>1</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#1098F7;'>do</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>defimpl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>block</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>f</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>do:</span> <span style='color:#1098F7;'>do</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>defimpl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>block</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>f</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#1098F7;'>do</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>defimpl</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>block</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># Unquote the implementation just later</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># when all variables will already be injected</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># into the module body.</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span> <span style='color:#1098F7;'>=</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>quote</span> <span style='color:#FBFBFF;'>unquote:</span> <span style='color:#4ECDC4;'><i>false</i></span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:for</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:target</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:protocol</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:for</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:target</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:protocol</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>protocol</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>for</span>      <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>name</span>     <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>concat</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#D7B884;'>Protocol.</span><span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>defmodule</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>name</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@behaviour</span> <span style='color:#FBFBFF;'>protocol</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@protocol</span>  <span style='color:#FBFBFF;'>protocol</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@for</span>       <span style='color:#FBFBFF;'>for</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>block</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>register</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:impl</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>persist:</span> <span style='color:#4ECDC4;'><i>true</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#C73E1D;'>@impl</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>protocol:</span> <span style='color:#C73E1D;'>@protocol,</span> <span style='color:#FBFBFF;'>for:</span> <span style='color:#C73E1D;'>@for</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>derive</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>derives</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>for</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>%</span><span style='color:#03DDB2;'>Macro.</span><span style='color:#03DDB2;'>Env</span><span style='color:#03DDB2;'>{</span><span style='color:#03DDB2;'>}</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>=</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>env</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>when</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>is</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>atom</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>for</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>struct</span> <span style='color:#1098F7;'>=</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>module</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:struct</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#FBFBFF;'>|</span><span style='color:#FBFBFF;'>|</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>raise</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>struct</span> <span style='color:#FBFBFF;'>is</span> <span style='color:#FBFBFF;'>not</span> <span style='color:#FBFBFF;'>defined</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>foreach</span><span style='color:#FBFBFF;'>(</span><span style='color:#1098F7;'>fn</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>proto</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>proto</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>derive</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>proto</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>proto</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>when</span> <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>proto</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#FBFBFF;'>derive</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>proto</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:lists</i></span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>flatten</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>derives</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:ok</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>derive</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>extra</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>"</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>cannot</span> <span style='color:#FBFBFF;'>derive</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>}</span> <span style='color:#FBFBFF;'>for</span> <span style='color:#565857;'><i>#</i></span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>inspect</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>}</span><span style='color:#FBFBFF;'>"</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>extra</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>assert</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#1098F7;'>!</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Map</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>extra</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#565857;'><i># Clean up variables from eval context</i></span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>env</span>  <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>%</span><span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>env</span> <span style='color:#FBFBFF;'>|</span> <span style='color:#FBFBFF;'>vars:</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>export</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>vars:</span> <span style='color:#4ECDC4;'><i>nil</i></span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>args</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>struct</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>opts</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>impl</span> <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>concat</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>Map</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#EAC435;'><i>:elixir</i></span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>expand</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>callback</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>.</span><span style='color:#FBFBFF;'>line</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>:</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>deriving</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>,</span> <span style='color:#1098F7;'>fn</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fun</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>args</span> <span style='color:#1098F7;'>-</span><span style='color:#1098F7;'>></span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>if</span> <span style='color:#FBFBFF;'>function</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>exported?</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fun</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>length</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#FBFBFF;'>apply</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>mod</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>fun</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>args</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>else</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>create</span><span style='color:#FBFBFF;'>(</span><span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>concat</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>quote</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>register</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>MODULE</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:impl</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>persist:</span> <span style='color:#4ECDC4;'><i>true</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#C73E1D;'>@impl</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>protocol:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>for:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>             <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>             <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:target</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:protocol</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#C73E1D;'>@spec</span> <span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:for</i></span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>:</span><span style='color:#1098F7;'>:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:target</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>impl</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:protocol</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>protocol</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>             <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>impl</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>(</span><span style='color:#EAC435;'>:for</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'>,</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do:</span> <span style='color:#FBFBFF;'>unquote</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>for</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>           <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>,</span> <span style='color:#D7B884;'>Macro.</span><span style='color:#D7B884;'>Env.</span><span style='color:#FBFBFF;'>location</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>env</span><span style='color:#FBFBFF;'>)</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#1098F7;'>end</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#C73E1D;'>@doc</span> <span style='color:#4ECDC4;'><i>false</i></span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>def</span><span style='color:#9A8BBB;'> </span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>spec</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>_</span><span style='color:#9A8BBB;'>?</span><span style='color:#9A8BBB;'>(</span><span style='color:#03DDB2;'>module</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>name</span><span style='color:#9A8BBB;'>,</span><span style='color:#03DDB2;'> </span><span style='color:#03DDB2;'>arity</span><span style='color:#9A8BBB;'>)</span><span style='color:#9A8BBB;'> </span><span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>signature</span> <span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>{</span><span style='color:#FBFBFF;'>name</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>arity</span><span style='color:#FBFBFF;'>}</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>specs</span>     <span style='color:#1098F7;'>=</span> <span style='color:#D7B884;'>Module.</span><span style='color:#FBFBFF;'>get</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>attribute</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>module</span><span style='color:#FBFBFF;'>,</span> <span style='color:#EAC435;'><i>:spec</i></span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>found</span> <span style='color:#1098F7;'>=</span>
 <span style='color:#C19875'> ·</span>       <span style='color:#FBFBFF;'>for</span> <span style='color:#FBFBFF;'>{</span><span style='color:#EAC435;'><i>:spec</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>expr</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>caller</span><span style='color:#FBFBFF;'>}</span> <span style='color:#1098F7;'><</span><span style='color:#1098F7;'>-</span> <span style='color:#FBFBFF;'>specs</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Kernel.</span><span style='color:#D7B884;'>Typespec.</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>to</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>signature</span><span style='color:#FBFBFF;'>(</span><span style='color:#FBFBFF;'>expr</span><span style='color:#FBFBFF;'>)</span> <span style='color:#1098F7;'>=</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>signature</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#D7B884;'>Kernel.</span><span style='color:#D7B884;'>Typespec.</span><span style='color:#FBFBFF;'>define</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>spec</span><span style='color:#FBFBFF;'>(</span><span style='color:#EAC435;'><i>:callback</i></span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>expr</span><span style='color:#FBFBFF;'>,</span> <span style='color:#FBFBFF;'>caller</span><span style='color:#FBFBFF;'>)</span>
 <span style='color:#C19875'> ·</span>         <span style='color:#4ECDC4;'><i>true</i></span>
 <span style='color:#C19875'> ·</span>       <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>found</span> <span style='color:#1098F7;'>!</span><span style='color:#1098F7;'>=</span> <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#565857;'><i>#</i></span><span style='color:#565857;'><i># Helpers</i></span>
 <span style='color:#C19875'> ·</span> 
 <span style='color:#C19875'> ·</span>   <span style='color:#FBFBFF;'>defp</span> <span style='color:#FBFBFF;'>builtin</span> <span style='color:#1098F7;'>do</span>
 <span style='color:#C19875'> ·</span>     <span style='color:#FBFBFF;'>[</span><span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>tuple:</span> <span style='color:#FBFBFF;'>Tuple</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>atom:</span> <span style='color:#FBFBFF;'>Atom</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>list:</span> <span style='color:#FBFBFF;'>List</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>map:</span> <span style='color:#FBFBFF;'>Map</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>bitstring:</span> <span style='color:#FBFBFF;'>BitString</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>integer:</span> <span style='color:#FBFBFF;'>Integer</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>float:</span> <span style='color:#FBFBFF;'>Float</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>function:</span> <span style='color:#FBFBFF;'>Function</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>pid:</span> <span style='color:#FBFBFF;'>PID</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>port:</span> <span style='color:#FBFBFF;'>Port</span><span style='color:#FBFBFF;'>,</span>
 <span style='color:#C19875'> ·</span>      <span style='color:#FBFBFF;'>is</span><span style='color:#FBFBFF;'>_</span><span style='color:#FBFBFF;'>reference:</span> <span style='color:#FBFBFF;'>Reference</span><span style='color:#FBFBFF;'>]</span>
 <span style='color:#C19875'> ·</span>   <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> <span style='color:#1098F7;'>end</span>
 <span style='color:#C19875'> ·</span> </code></pre><br></file>